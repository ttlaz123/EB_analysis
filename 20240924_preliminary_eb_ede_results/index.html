<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Early Dark Energy EB spectrum multicomponent analysis</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Load up MathJax for math notation -->
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
    </script>
  </head>

<body>
    <!-- Add my custom pager script -->
    <script type="text/javascript" src="scripts/pager.js"></script>
    <link rel="stylesheet" type="text/css" href="scripts/pager.css">

    <header>
        <h1>Early Dark Energy EB spectrum multicomponent analysis</h1>

        <time datetime="{{ last_updated | safe }}" class="published updated">
            2024 September 24
        </time> â€”
        Tongtian Liu, Dominic Beck
    </header>

    <hr>

    <section>
        <h2>Introduction</h2>
        <p>{{ introduction }}</p>
    </section>

    <section>
        <h2>Reproducing BK18 Polarization Rotation</h2>
        https://bicep.rc.fas.harvard.edu/bkcmb/analysis_logbook/analysis/20201221_BK18_polrot/

        <figure>
            <img alt="polrot" id="polrot" src="#" width="750" height="750" onerror="javascript:this.src='dne.png'" />
            <figcaption>
                Plot Pager
            </figcaption>
            <script type="text/javascript">
          
                pager.link("#polrot",
                    {
                        'Map Frequency|mapfreq':[
                            'BICEP 95GHz|BK18_B95',
                            'Keck 95GHz|BK18_K95',
                            'BICEP 95GHz Extended|BK18_B95ext',
                            'BICEP 150GHz|BK18_150',
                            'BICEP 220GHz|BK18_220',
                        ],
                        'Map type|map_type':[
                            'Best Fit|_bestfit',
                            'Triangle Plot|_triagplot',
                            'Component Spectra Dls|_spectra_Dls',
                            'Component Spectra Cls|_spectra_Cls',
                        ],
                        'Bins used|bin_num': [
                            '2-10|',
                            '2-17|_bin17'
                        ],
                        'Add EDE Spectrum?|ede':[
                            'Yes|True',
                            'No|False'
                        ]
                    },
                    function (params) {
                        let dirpath = '../output_plots_ede' + params.ede;
                        dirpath = dirpath + params.bin_num;
                        sim_folder = 'real' ;
                        polrot_plot = params.mapfreq + params.map_type + '.png';
                        let name = dirpath + '/' + sim_folder + '/' + polrot_plot;
                        console.log(name);
                        return name;
                    }
                );
        
                pager.setparams(
                    {
                        'mapfreq': 'BK18_B95',
                        'map_type': '_triagplot',
                        'bin_num': '',
                        'ede': 'False'
                    }
                );
            </script>
        </figure>
    </section>

    <section>
        <h2>Adding Early Dark Energy EB Spectrum</h2>
        
        <figure>
            <img alt="polrot" id="multicomp" src="#" width="750" height="750" onerror="javascript:this.src='dne.png'" />
            <figcaption>
                Plot Pager
            </figcaption>
            <script type="text/javascript">
          
                pager.link("#multicomp",
                    {
                        'Map Frequency|mapfreq':[
                            'BICEP 95GHz|BK18_B95',
                            'Keck 95GHz|BK18_K95',
                            'BICEP 95GHz Extended|BK18_B95ext',
                            'BICEP 150GHz|BK18_150',
                            'BICEP 220GHz|BK18_220',
                        ],
                        'Map type|multi_map_type':[
                            'Best Fit|_bestfit',
                            'Triangle Plot|_triagplot',
                            'Component Spectra Dls|_spectra_Dls',
                            'Component Spectra Cls|_spectra_Cls',
                        ],
                        'Bins used|bin_num': [
                            '2-10|',
                            '2-17|_bin17'
                        ],
                        'Add EDE Spectrum?|ede':[
                            'Yes|True',
                            'No|False'
                        ]
                    },
                    function (params) {
                        let dirpath = '../output_plots_ede' + params.ede + '_multicomp';
                        dirpath = dirpath + params.bin_num;
                        sim_folder = 'real' ;
                        ede_plot = '';
                        if(params.multi_map_type == '_triagplot'){
                            ede_plot = 'Multicomponent_triagplot.png'
                        } else if(params.multi_map_type == '_bestfit'){
                            ede_plot = 'multicomp_bestfit_' + params.mapfreq + '.png';
                        } else {
                            ede_plot = params.mapfreq + params.multi_map_type + '.png';
                        }
                        let name = dirpath + '/' + sim_folder + '/' + ede_plot;
                        console.log(name);
                        return name;
                    }
                );
        
                pager.setparams(
                    {
                        'mapfreq': 'BK18_B95',
                        'multi_map_type': '_triagplot',
                        'bin_num': '',
                        'ede': 'False'
                    }
                );
            </script>
        </figure>
        
        <figure>
            <img alt="Plot" id="multisim" src="#" width="750" height="750" onerror="javascript:this.src='dne.png'" />
            <figcaption>
                Plot Pager
            </figcaption>
            <script type="text/javascript">
                // Function to generate simulation numbers
                function generateSimNumOptions(start, end) {
                    let options = [];
                    for (let i = start; i <= end; i++) {
                        let num = i.toString().padStart(1, '0'); // Format numbers as two digits
                        options.push(`${num}|${num}`);
                    }
                    return options;
                }
        
                // Generate options for simulation numbers from 0 to 499
                const simNumOptions = generateSimNumOptions(0, 9);
        
                pager.link("#multisim",
                    {
                        'Map Sim Num Digit1|digit1': simNumOptions,
                        'Digit2|digit2': simNumOptions,
                        'Digit3|digit3': simNumOptions,
                        'Bins used|bin_num': [
                            '2-10|',
                            '2-17|_bin17'
                        ]
                    },
                    function (params) {
                        let dirpath = '../output_plots_edeTrue_multicomp';
                        dirpath = dirpath + params.bin_num;

                        simNumber = params.digit1 + params.digit2 + params.digit3;
                   
                        sim_folder = 'sim_num' + parseInt(simNumber, 10); // Remove leading zeros
                   
                        sim_triag_plot_name = 'BK18_B95ext_triagplot.png' //this is misnamed
                        let name = dirpath + '/' + sim_folder + '/' + sim_triag_plot_name;
                        console.log(name);
                        return name;
                    }
                );
        
                pager.setparams(
                    {
                        'digit1': '0',
                        'digit2': '0',
                        'digit3': '0',
                        'bin_num': ''
                    }
                );
            </script>
        </figure>
        
    </section>

    <section>
        <h2>Maps Pager</h2>
        <figure>
            <img alt="summaryplot" id="summaryplot" src="#" width="750" height="750" onerror="javascript:this.src='dne.png'" />
            <figcaption>
                Plot Pager
            </figcaption>
            <script type="text/javascript">
          
                pager.link("#summaryplot",
                    {
                        'Map type|sum_map_type':[
                            'Best Fit|multicomp_bestfit_allsims',
                            'Triangle Plot|real_and_sims_corner',
                        ],
                        'Bins used|bin_num': [
                            '2-10|',
                            '2-17|_bin17'
                        ],
                    },
                    function (params) {
                        let dirpath = '../output_plots_edeTrue_multicomp';
                        dirpath = dirpath + params.bin_num;
                        sim_folder = 'real' ;
                        summary_plot = params.sum_map_type + '.png';
                        let name = dirpath +  '/' + summary_plot;
                        console.log(name);
                        return name;
                    }
                );
        
                pager.setparams(
                    {
                        'sum_map_type': 'multicomp_bestfit_allsims',
                        'bin_num': '',
                    }
                );
            </script>
        </figure>

        
    </section>
    <section>
        <h2>Appendix</h2>
        <p>Path to mat files:</p>
        <pre>{{ appendix | safe }}</pre>
    </section>

</body>

</html>